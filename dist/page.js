"use strict";var _jsxRuntime=require("react/jsx-runtime");var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function get(){return m[k];}};}Object.defineProperty(o,k2,desc);}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v});}:function(o,v){o["default"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod){if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);}__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(exports,"__esModule",{value:true});exports.Page=void 0;var react_1=__importStar(require("react"));var react_native_1=require("react-native");var react_native_2=require("react-native");var lodash_1=__importDefault(require("lodash"));var defaultDuration=300;function Page(_ref){var animation=_ref.animation,animationSpeed=_ref.animationSpeed,onAnimationFinished=_ref.onAnimationFinished,_ref$width=_ref.width,width=_ref$width===void 0?400:_ref$width,_ref$height=_ref.height,height=_ref$height===void 0?400:_ref$height,children=_ref.children;var x=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current;var y=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current;var opacity=(0,react_1.useRef)(new react_native_1.Animated.Value(1)).current;var scale=(0,react_1.useRef)(new react_native_1.Animated.Value(1)).current;var spinAngle=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current;var flipAngle=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current;var viewRef=(0,react_1.useRef)();var lastAnimationRef=(0,react_1.useRef)();var useNativeDriver=react_native_2.Platform.OS!=="web";var duration;switch(animationSpeed){case"slow":duration=1500;break;case"medium":duration=750;break;default:duration=300;}var spin=spinAngle.interpolate({inputRange:[0,360],outputRange:["0deg","360deg"]});var flip=flipAngle.interpolate({inputRange:[270,360],outputRange:["270deg","360deg"]});(0,react_1.useEffect)(function(){var runners=[];var animations=lodash_1.default.isArray(animation)?animation:[animation];if(!animations.length){onAnimationFinished===null||onAnimationFinished===void 0?void 0:onAnimationFinished.call(undefined);}else if(animations.length===1&&animations[0]==="none"){onAnimationFinished===null||onAnimationFinished===void 0?void 0:onAnimationFinished.call(undefined);}else{react_native_1.Keyboard.dismiss();animations.forEach(function(a){if(a==="slideFromRight"){x.setValue(width);runners.push(react_native_1.Animated.timing(x,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideToRight"){x.setValue(0);runners.push(react_native_1.Animated.timing(x,{toValue:width,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideFromLeft"){x.setValue(-width);runners.push(react_native_1.Animated.timing(x,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideToLeft"){x.setValue(0);runners.push(react_native_1.Animated.timing(x,{toValue:-width,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideFromBottom"){y.setValue(height);runners.push(react_native_1.Animated.timing(y,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideToBottom"){y.setValue(0);runners.push(react_native_1.Animated.timing(y,{toValue:height,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideFromTop"){y.setValue(-height);runners.push(react_native_1.Animated.timing(y,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="slideToTop"){y.setValue(0);runners.push(react_native_1.Animated.timing(y,{toValue:-height,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="fadeIn"){opacity.setValue(0);runners.push(react_native_1.Animated.timing(opacity,{toValue:1,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="fadeOut"){opacity.setValue(1);runners.push(react_native_1.Animated.timing(opacity,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="scaleUp"){scale.setValue(0);runners.push(react_native_1.Animated.timing(scale,{toValue:1,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="scaleDown"){scale.setValue(1);runners.push(react_native_1.Animated.timing(scale,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="spinClockwise"){spinAngle.setValue(0);runners.push(react_native_1.Animated.timing(spinAngle,{toValue:360,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="spinCounterClockwise"){spinAngle.setValue(360);runners.push(react_native_1.Animated.timing(spinAngle,{toValue:0,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="flipUp"){flipAngle.setValue(270);runners.push(react_native_1.Animated.timing(flipAngle,{toValue:360,duration:duration,useNativeDriver:useNativeDriver}));}else if(a==="flipDown"){flipAngle.setValue(360);runners.push(react_native_1.Animated.timing(flipAngle,{toValue:270,duration:duration,useNativeDriver:useNativeDriver}));}});if(lastAnimationRef.current){lastAnimationRef.current.stop();}lastAnimationRef.current=react_native_1.Animated.parallel(runners);lastAnimationRef.current.start(function(){lastAnimationRef.current=undefined;onAnimationFinished===null||onAnimationFinished===void 0?void 0:onAnimationFinished.call(undefined);});}});return(0,_jsxRuntime.jsx)(react_native_1.Animated.View,{ref:viewRef,onLayout:function onLayout(ev){width=ev.nativeEvent.layout.width;height=ev.nativeEvent.layout.height;},style:animation!=="none"?{transform:[{translateX:x},{translateY:y},{scale:scale},{rotateZ:spin},{rotateX:flip},{rotateY:flip}],opacity:opacity,flex:1}:{flex:1},children:children});}exports.Page=Page;