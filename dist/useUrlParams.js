"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(exports,"__esModule",{value:true});exports.useHashParams=void 0;var react_1=require("react");var lodash_1=__importDefault(require("lodash"));var bignumber_js_1=require("bignumber.js");function hashToObject(hash){var result={};decodeURIComponent(hash).substring(1).split("&").forEach(function(pair){if(pair.includes("=")){var _pair$split=pair.split("="),_pair$split2=(0,_slicedToArray2.default)(_pair$split,2),key=_pair$split2[0],value=_pair$split2[1];result[key]=value;return result;}else if(pair){return result[pair]="";}});return result;}function createGetFunction(url,params){var result=lodash_1.default.pick(hashToObject(url.hash),params);return function(name){var value=result[name];return{toString:function toString(){return value;},toNumber:function toNumber(){return new Number(value).valueOf();},toBoolean:function toBoolean(){return new Boolean(value).valueOf();},toBigNumber:function toBigNumber(){return new bignumber_js_1.BigNumber(value);},toDate:function toDate(){return new Date(value);}};};}function hadParamChange(oldUrl,newUrl,params){var oldValues=hashToObject(oldUrl.hash);var newValues=hashToObject(newUrl.hash);if(params.length){return lodash_1.default.find(params,function(p){return oldValues[p]!==newValues[p];});}else{return true;}}function useHashParams(){for(var _len=arguments.length,triggers=new Array(_len),_key=0;_key<_len;_key++){triggers[_key]=arguments[_key];}var _react_1$useState=react_1.useState(),_react_1$useState2=(0,_slicedToArray2.default)(_react_1$useState,2),params=_react_1$useState2[0],setParams=_react_1$useState2[1];var _react_1$useState3=react_1.useState(false),_react_1$useState4=(0,_slicedToArray2.default)(_react_1$useState3,2),wiredUp=_react_1$useState4[0],setWiredUp=_react_1$useState4[1];if(!wiredUp){window.addEventListener("hashchange",function(ev){if(hadParamChange(new URL(ev.oldURL),new URL(ev.newURL),triggers)){var result=createGetFunction(new URL(ev.newURL),triggers);setParams({get:result});}});setWiredUp(true);}return params||{get:createGetFunction(new URL(window.location.href),triggers)};}exports.useHashParams=useHashParams;